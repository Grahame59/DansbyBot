using System;
using System.Collections.Generic;
using System.Drawing;
using System.IO;
using System.Windows.Forms;
using System.Threading.Tasks;

namespace ChatbotApp
{
    public partial class MineCraftBookForm : Form 
    {
        private RichTextBox pageTextBox;
        private List<Button> chapterButtons = new List<Button>();
        private Button prevButton;
        private Button nextButton;
        private int currentPage = 0;
        private int totalChapters = 5;
        private Dictionary<int, string> pageContents = new Dictionary<int, string>();

        public McBookForm()
        {
            InitializeComponent();
            SetupBookInterface();
            LoadPageContents();
            DisplayPage();
        }

        private void InitializeComponent()
        {
            this.pageTextBox = new RichTextBox();
            this.prevButton = new Button();
            this.nextButton = new Button();
            this.SuspendLayout();

            // 
            // pageTextBox
            // 
            this.pageTextBox.Location = new Point(20, 20);
            this.pageTextBox.Size = new Size(260, 180);
            this.pageTextBox.Font = new Font("Arial", 12);
            this.pageTextBox.TextChanged += new EventHandler(this.PageTextBox_TextChanged);

            // 
            // prevButton
            // 
            this.prevButton.Location = new Point(20, 210);
            this.prevButton.Size = new Size(75, 23);
            this.prevButton.Text = "Previous";
            this.prevButton.Click += new EventHandler(this.PrevButton_Click);

            // 
            // nextButton
            // 
            this.nextButton.Location = new Point(205, 210);
            this.nextButton.Size = new Size(75, 23);
            this.nextButton.Text = "Next";
            this.nextButton.Click += new EventHandler(this.NextButton_Click);

            // 
            // McBookForm
            // 
            this.ClientSize = new Size(300, 250);
            this.Controls.Add(this.pageTextBox);
            this.Controls.Add(this.prevButton);
            this.Controls.Add(this.nextButton);
            this.Name = "MineCraftBookForm";
            this.Text = "Minecraft Book";
            this.ResumeLayout(false);
        }

        private void SetupBookInterface()
        {
            this.BackColor = Color.BurlyWood; // Set background color to resemble a book
            CreateChapterButtons();
        }

        private void CreateChapterButtons()
        {
            int buttonWidth = 100;
            int buttonHeight = 30;
            int startX = 20;
            int startY = 20;
            int margin = 10;

            for (int i = 0; i < totalChapters; i++)
            {
                Button chapterButton = new Button
                {
                    Text = $"Chapter {i + 1}",
                    Size = new Size(buttonWidth, buttonHeight),
                    Location = new Point(startX + (i % 2) * (buttonWidth + margin), startY + (i / 2) * (buttonHeight + margin))
                };
                chapterButton.Click += (sender, e) => NavigateToPage(i + 1);
                chapterButtons.Add(chapterButton);
                this.Controls.Add(chapterButton);
            }
        }

        private void NavigateToPage(int pageNumber)
        {
            currentPage = pageNumber;
            DisplayPage();
        }

        private void DisplayPage()
        {
            foreach (var button in chapterButtons)
            {
                button.Visible = currentPage == 0;
            }

            pageTextBox.Visible = currentPage > 0;
            if (currentPage > 0)
            {
                pageTextBox.Text = pageContents.ContainsKey(currentPage) ? pageContents[currentPage] : string.Empty;
            }
        }

        private void PrevButton_Click(object sender, EventArgs e)
        {
            if (currentPage > 0)
            {
                currentPage--;
                DisplayPage();
            }
        }

        private void NextButton_Click(object sender, EventArgs e)
        {
            if (currentPage < totalChapters)
            {
                currentPage++;
                DisplayPage();
            }
        }

        private void PageTextBox_TextChanged(object sender, EventArgs e)
        {
            if (currentPage > 0)
            {
                pageContents[currentPage] = pageTextBox.Text;
                SavePageContent();
            }
        }

        private void LoadPageContents()
        {
            if (File.Exists("PageContents.txt"))
            {
                var lines = File.ReadAllLines("PageContents.txt");
                for (int i = 0; i < lines.Length; i++)
                {
                    pageContents[i + 1] = lines[i];
                }
            }
        }

        private void SavePageContent()
        {
            using (StreamWriter writer = new StreamWriter("PageContents.txt"))
            {
                for (int i = 1; i <= totalChapters; i++)
                {
                    writer.WriteLine(pageContents.ContainsKey(i) ? pageContents[i] : string.Empty);
                }
            }
        }
    } // end of public partial class
} // end of namespace 
 